(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[53,30,31,32],{"0Owb":function(e,t,n){"use strict";function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},a.apply(this,arguments)}n.d(t,"a",(function(){return a}))},"9KFR":function(e,t,n){"use strict";n.r(t);var a=n("0Owb"),r=n("q1tI"),l=n.n(r),o=(n("B2uJ"),n("+su7"),n("qOys")),c=n.n(o),s=n("5Yjd"),m=n.n(s),i=l.a.memo((function(){var e=n("K+nK"),t=e(n("q1tI")),a=e(n("iKxd")),r=function(){return t["default"].createElement(a["default"],null)};return t["default"].createElement(r)})),u=l.a.memo((function(){var e=n("K+nK"),t=e(n("q1tI")),a=e(n("fZaY")),r=function(){return t["default"].createElement(a["default"],null)};return t["default"].createElement(r)})),d=l.a.memo((function(){var e=n("K+nK"),t=e(n("q1tI")),a=e(n("fOoO")),r=function(){return t["default"].createElement(a["default"],null)};return t["default"].createElement(r)}));t["default"]=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h1",{id:"context"},l.a.createElement("a",{"aria-hidden":"true",href:"#context"},l.a.createElement("span",{className:"icon icon-link"})),"Context"),l.a.createElement("p",null,"Context \u63d0\u4f9b\u4e86\u4e00\u4e2a\u65e0\u9700\u4e3a\u6bcf\u5c42\u7ec4\u4ef6\u624b\u52a8\u6dfb\u52a0 ",l.a.createElement("code",null,"props"),"\uff0c\u5c31\u80fd\u5728\u7ec4\u4ef6\u6811\u95f4\u8fdb\u884c\u6570\u636e\u4f20\u9012\u7684\u65b9\u6cd5\u3002"),l.a.createElement("p",null,"\u5728\u5178\u578b\u7684 React \u5e94\u7528\u4e2d\uff0c\u6570\u636e\u662f\u901a\u8fc7 ",l.a.createElement("code",null,"props")," \u5c5e\u6027\u81ea\u4e0a\u800c\u4e0b\uff08\u7531\u7236\u53ca\u5b50\uff09\u8fdb\u884c\u4f20\u9012\u7684\uff0c\u4f46\u8fd9\u79cd\u505a\u6cd5\u5bf9\u4e8e\u67d0\u4e9b\u7c7b\u578b\u7684\u5c5e\u6027\u800c\u8a00\u662f\u6781\u5176\u7e41\u7410\u7684\uff08\u4f8b\u5982\uff1a\u5730\u533a\u504f\u597d\u3001UI \u4e3b\u9898\uff09\uff0c\u8fd9\u4e9b\u5c5e\u6027\u662f\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bb8\u591a\u7ec4\u4ef6\u90fd\u9700\u8981\u3002Context \u63d0\u4f9b\u4e86\u4e00\u79cd\u5728\u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\u6b64\u7c7b\u503c\u7684\u65b9\u5f0f\uff0c\u800c\u4e0d\u5fc5\u663e\u5f0f\u5730\u901a\u8fc7\u7ec4\u4ef6\u6811\u7684\u9010\u5c42\u4f20\u9012 ",l.a.createElement("code",null,"props"),"\u3002"),l.a.createElement("h2",{id:"\u9002\u7528\u573a\u666f"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u9002\u7528\u573a\u666f"},l.a.createElement("span",{className:"icon icon-link"})),"\u9002\u7528\u573a\u666f"),l.a.createElement("p",null,"Context \u4e3b\u8981\u5e94\u7528\u573a\u666f\u5728\u4e8e\u5f88\u591a\u4e0d\u540c\u5c42\u7ea7\u7684\u7ec4\u4ef6\u9700\u8981\u8bbf\u95ee\u540c\u6837\u4e00\u4e9b\u7684\u6570\u636e\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u4f7f\u5f97\u7ec4\u4ef6\u7684\u590d\u7528\u6027\u53d8\u5dee\u3002"),l.a.createElement("p",null,"\u5bf9\u4e8e",l.a.createElement("strong",null,"\u5168\u5c40\u3001\u4e0d\u5e38\u4fee\u6539\u7684\u6570\u636e\u5171\u4eab"),"\uff0c\u5c31\u6bd4\u8f83\u9002\u5408\u7528 Context API \u6765\u5b9e\u73b0\u3002"),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5f53\u524d\u8ba4\u8bc1\u7684\u7528\u6237"),l.a.createElement("li",null,"\u4e3b\u9898\u65b9\u6848"),l.a.createElement("li",null,"\u9996\u9009\u8bed\u8a00")),l.a.createElement("p",null,"\u9664\u4e86\u4e1a\u52a1\u573a\u666f\u5916\uff0c\u5f88\u591a React \u76f8\u5173\u7684\u529f\u80fd\u5e93\u4e5f\u662f\u4f7f\u7528 Context API \u5b9e\u73b0\uff1a"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"https://github.com/reduxjs/react-redux",target:"_blank",rel:"noopener noreferrer"},"React Redux",l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},l.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),l.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}))),"\uff1a",l.a.createElement("code",null,"<Provider>")," \u7ec4\u4ef6\uff0c\u901a\u8fc7 Context \u63d0\u4f9b\u4e00\u4e2a\u5168\u5c40\u6001\u7684 ",l.a.createElement("code",null,"store")),l.a.createElement("li",null,l.a.createElement("a",{href:"https://github.com/ReactTraining/react-router",target:"_blank",rel:"noopener noreferrer"},"React Router",l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},l.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),l.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}))),"\uff1a\u8def\u7531\u7ec4\u4ef6\uff0c\u901a\u8fc7 Context \u7ba1\u7406\u8def\u7531\u72b6\u6001"),l.a.createElement("li",null,l.a.createElement("a",{href:"https://github.com/react-dnd/react-dnd",target:"_blank",rel:"noopener noreferrer"},"react-dnd",l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},l.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),l.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}))),"\uff1a\u62d6\u62fd\u7ec4\u4ef6\uff0c\u901a\u8fc7 Context \u5728\u7ec4\u4ef6\u4e2d\u5206\u53d1 DOM \u7684 drag \u548c drop \u4e8b\u4ef6")),l.a.createElement("h2",{id:"api"},l.a.createElement("a",{"aria-hidden":"true",href:"#api"},l.a.createElement("span",{className:"icon icon-link"})),"API"),l.a.createElement("p",null,"\u8f6c\u8f7d\u81ea ",l.a.createElement("a",{href:"https://zh-hans.reactjs.org/docs/context.html#api",target:"_blank",rel:"noopener noreferrer"},"\u5b98\u65b9\u6587\u6863",l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},l.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),l.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))),l.a.createElement("h3",{id:"reactcreatecontext"},l.a.createElement("a",{"aria-hidden":"true",href:"#reactcreatecontext"},l.a.createElement("span",{className:"icon icon-link"})),"React.createContext"),l.a.createElement(c.a,{code:"const MyContext = React.createContext(defaultValue);\n",lang:"jsx"}),l.a.createElement("p",null,"\u521b\u5efa\u4e00\u4e2a Context \u5bf9\u8c61\u3002\u5f53 React \u6e32\u67d3\u4e00\u4e2a\u8ba2\u9605\u4e86\u8fd9\u4e2a Context \u5bf9\u8c61\u7684\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u4f1a\u4ece\u7ec4\u4ef6\u6811\u4e2d\u79bb\u81ea\u8eab\u6700\u8fd1\u7684\u90a3\u4e2a\u5339\u914d\u7684 ",l.a.createElement("code",null,"Provider")," \u4e2d\u8bfb\u53d6\u5230\u5f53\u524d\u7684 ",l.a.createElement("code",null,"context")," \u503c\u3002"),l.a.createElement("p",null,"\u53ea\u6709\u5f53\u7ec4\u4ef6\u6240\u5904\u7684\u6811\u4e2d\u6ca1\u6709\u5339\u914d\u5230 ",l.a.createElement("code",null,"Provider")," \u65f6\uff0c\u5176 ",l.a.createElement("code",null,"defaultValue")," \u53c2\u6570\u624d\u4f1a\u751f\u6548\u3002\u8fd9\u6709\u52a9\u4e8e\u5728\u4e0d\u4f7f\u7528 ",l.a.createElement("code",null,"Provider")," \u5305\u88c5\u7ec4\u4ef6\u7684\u60c5\u51b5\u4e0b\u5bf9\u7ec4\u4ef6\u8fdb\u884c\u6d4b\u8bd5\u3002"),l.a.createElement("p",null,"\u26a0\ufe0f ",l.a.createElement("strong",null,"\u6ce8\u610f"),"\uff1a\u5c06 ",l.a.createElement("code",null,"undefined")," \u4f20\u9012\u7ed9 ",l.a.createElement("code",null,"Provider")," \u7684 ",l.a.createElement("code",null,"value")," \u65f6\uff0c\u6d88\u8d39\u7ec4\u4ef6\u7684 ",l.a.createElement("code",null,"defaultValue")," \u4e0d\u4f1a\u751f\u6548\u3002"),l.a.createElement("h3",{id:"contextprovider"},l.a.createElement("a",{"aria-hidden":"true",href:"#contextprovider"},l.a.createElement("span",{className:"icon icon-link"})),"Context.Provider"),l.a.createElement(c.a,{code:"<MyContext.Provider value={/* \u67d0\u4e2a\u503c */}>\n",lang:"jsx"}),l.a.createElement("p",null,"\u6bcf\u4e2a ",l.a.createElement("code",null,"Context")," \u5bf9\u8c61\u90fd\u6302\u8f7d\u4e86\u4e00\u4e2a ",l.a.createElement("code",null,"<Provider>")," \u7ec4\u4ef6\uff0c\u5b83\u5141\u8bb8\u6d88\u8d39\u7ec4\u4ef6\u8ba2\u9605 ",l.a.createElement("code",null,"context")," \u7684\u53d8\u5316\u3002"),l.a.createElement("p",null,l.a.createElement("code",null,"Provider")," \u63a5\u6536\u4e00\u4e2a ",l.a.createElement("code",null,"value")," \u5c5e\u6027\uff0c\u4f20\u9012\u7ed9\u6d88\u8d39\u7ec4\u4ef6\u3002\u4e00\u4e2a ",l.a.createElement("code",null,"Provider")," \u53ef\u4ee5\u548c\u591a\u4e2a\u6d88\u8d39\u7ec4\u4ef6\u7531\u5bf9\u5e94\u5173\u7cfb\u3002\u591a\u4e2a Provider \u4e5f\u53ef\u4ee5\u5d4c\u5957\u4f7f\u7528\uff0c",l.a.createElement("strong",null,"\u91cc\u5c42\u7684\u4f1a\u8986\u76d6\u5916\u5c42\u7684\u6570\u636e"),"\u3002"),l.a.createElement("p",null,"\u5f53 ",l.a.createElement("code",null,"Provider")," \u7684 ",l.a.createElement("code",null,"value")," \u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5b83\u5185\u90e8\u7684\u6240\u6709\u6d88\u8d39\u7ec4\u4ef6\u90fd\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002",l.a.createElement("code",null,"Provider")," \u53ca\u5176\u5185\u90e8 ",l.a.createElement("code",null,"consumer")," \u7ec4\u4ef6\u90fd\u4e0d\u53d7\u5236\u4e8e ",l.a.createElement("code",null,"shouldComponentUpdate")," \u51fd\u6570\uff0c\u56e0\u6b64\u5f53 ",l.a.createElement("code",null,"consumer")," \u7ec4\u4ef6\u5728\u5176\u7956\u5148\u7ec4\u4ef6\u9000\u51fa\u66f4\u65b0\u7684\u60c5\u51b5\u4e0b\u4e5f\u80fd\u66f4\u65b0\u3002"),l.a.createElement("p",null,"\u901a\u8fc7\u65b0\u65e7\u503c\u76d1\u6d4b\u6765\u786e\u5b9a\u53d8\u5316\uff0c\u4f7f\u7528\u4e86\u4e0e ",l.a.createElement("code",null,"Object.is")," \u76f8\u540c\u7684\u7b97\u6cd5\u3002"),l.a.createElement("h3",{id:"classcontexttype"},l.a.createElement("a",{"aria-hidden":"true",href:"#classcontexttype"},l.a.createElement("span",{className:"icon icon-link"})),"Class.contextType"),l.a.createElement(c.a,{code:"class MyClass extends React.Component {\n  componentDidMount() {\n    let value = this.context;\n    // \u5728\u7ec4\u4ef6\u6302\u8f7d\u5b8c\u6210\u540e\uff0c\u4f7f\u7528 MyContext \u7ec4\u4ef6\u7684\u503c\u6765\u6267\u884c\u4e00\u4e9b\u6709\u526f\u4f5c\u7528\u7684\u64cd\u4f5c\n  }\n  componentDidUpdate() {\n    let value = this.context;\n  }\n  componentWillUnmount() {\n    let value = this.context;\n  }\n  render() {\n    let value = this.context;\n    // \u57fa\u4e8e MyContext \u7ec4\u4ef6\u7684\u503c\n  }\n}\n\nMyClass.contextType = MyContext;\n",lang:"jsx"}),l.a.createElement("p",null,"\u6302\u8f7d\u5728 class \u4e0a\u7684 ",l.a.createElement("code",null,"contextType")," \u5c5e\u6027\u4f1a\u88ab\u91cd\u8d4b\u503c\u4e3a\u4e00\u4e2a\u7531 ",l.a.createElement("code",null,"React.createContext()")," \u521b\u5efa\u7684 Context \u5bf9\u8c61\u3002\u8fd9\u80fd\u8ba9\u4f60\u4f7f\u7528 ",l.a.createElement("code",null,"this.context")," \u6765\u6d88\u8d39\u6700\u8fd1 Context \u4e0a\u7684\u90a3\u4e2a\u503c\u3002\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55\u751f\u547d\u5468\u671f\u4e2d\u8bbf\u95ee\u5230\u5b83\uff0c\u5305\u62ec ",l.a.createElement("code",null,"render")," \u51fd\u6570\u4e2d\u3002"),l.a.createElement("h3",{id:"contextconsumer"},l.a.createElement("a",{"aria-hidden":"true",href:"#contextconsumer"},l.a.createElement("span",{className:"icon icon-link"})),"Context.Consumer"),l.a.createElement(c.a,{code:"<MyContext.Consumer>\n  {value => /* \u57fa\u4e8e context \u503c\u8fdb\u884c\u6e32\u67d3 */}\n</MyContext.Consumer>\n",lang:"jsx"}),l.a.createElement("p",null,"\u8fd9\u91cc\uff0cReact \u7ec4\u4ef6\u4e5f\u53ef\u4ee5\u8ba2\u9605\u5230 context \u53d8\u66f4\u3002\u8fd9\u80fd\u8ba9\u4f60\u5728\u51fd\u6570\u5f0f\u7ec4\u4ef6\u4e2d\u5b8c\u6210\u8ba2\u9605 ",l.a.createElement("code",null,"context"),"\u3002"),l.a.createElement("p",null,"\u8fd9\u9700\u8981\u51fd\u6570\u4f5c\u4e3a\u5b50\u5143\u7d20\uff08function as a child\uff09\u8fd9\u79cd\u505a\u6cd5\u3002\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u5f53\u524d\u7684 context \u503c\uff0c\u8fd4\u56de\u4e00\u4e2a React \u8282\u70b9\u3002\u4f20\u9012\u7ed9\u51fd\u6570\u7684 ",l.a.createElement("code",null,"value")," \u503c\u7b49\u540c\u4e8e\u5f80\u4e0a\u7ec4\u4ef6\u6811\u79bb\u8fd9\u4e2a context \u6700\u8fd1\u7684 ",l.a.createElement("code",null,"Provider")," \u63d0\u4f9b\u7684 ",l.a.createElement("code",null,"value")," \u503c\u3002\u5982\u679c\u6ca1\u6709\u5bf9\u5e94\u7684 ",l.a.createElement("code",null,"Provider"),"\uff0c",l.a.createElement("code",null,"value")," \u53c2\u6570\u7b49\u540c\u4e8e\u4f20\u9012\u7ed9 ",l.a.createElement("code",null,"createContext()")," \u7684 ",l.a.createElement("code",null,"defaultValue"),"\u3002"),l.a.createElement("h3",{id:"contextdisplayname"},l.a.createElement("a",{"aria-hidden":"true",href:"#contextdisplayname"},l.a.createElement("span",{className:"icon icon-link"})),"Context.displayName"),l.a.createElement(c.a,{code:'const MyContext = React.createContext(/* some value */)\nMyContext.displayName = \'MyDisplayName\';\n\n<MyContext.Provider>  // "MyDisplayName.Provider" \u5728 DevTools \u4e2d\n<MyContext.Consumer> // "MyDisplayName.Consumer" \u5728 DevTools \u4e2d\n',lang:"jsx"}),l.a.createElement("h2",{id:"\u5b9e\u7528\u793a\u4f8b"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u5b9e\u7528\u793a\u4f8b"},l.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u7528\u793a\u4f8b"),l.a.createElement("h3",{id:"\u52a8\u6001-context"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u52a8\u6001-context"},l.a.createElement("span",{className:"icon icon-link"})),"\u52a8\u6001 Context"),l.a.createElement("p",null,"\u5bf9\u4e8e\u4e0a\u8ff0\u7684 theme \u4f8b\u5b50\uff0c\u4f7f\u7528\u52a8\u6001\u503c\uff08dynamic values\uff09\u540e\u66f4\u590d\u6742\u7684\u7528\u6cd5\uff1a")),l.a.createElement(m.a,Object(a["a"])({source:{jsx:"import React from 'react';\n\n// ThemeContext\nconst themes = {\n  light: {\n    background: '#eeeeee',\n    color: '#222222',\n  },\n  dark: {\n    background: '#222222',\n    color: '#eeeeee',\n  },\n};\n\n// \u521b\u5efa Context \u5bf9\u8c61\nconst ThemeContext = React.createContext(\n  themes.dark // \u9ed8\u8ba4\u503c\n);\n\n// ThemedButton\nclass ThemedButton extends React.Component {\n  render() {\n    let props = this.props;\n    // \u5916\u90e8\u521b\u5efa\u7684 Context \u9759\u6001\u6302\u8f7d\u4e86 contextType\n    // \u6240\u4ee5\u53ef\u4ee5\u83b7\u53d6\u5230\u5bf9\u5e94\u7684 Context \u5bf9\u8c61\n    let theme = this.context;\n    return (\n      <button\n        {...props}\n        style={{\n          marginTop: 16,\n          outline: 'none',\n          color: theme.color,\n          backgroundColor: theme.background,\n          cursor: 'pointer'\n        }}\n      >\n        Submit\n      </button>\n    );\n  }\n}\n\n// \u5c06\u5916\u90e8\u521b\u5efa\u7684 Context \u5bf9\u8c61\u6302\u8f7d\u5230 Class \u4e0a\u7684 contextType \u5c5e\u6027\u4e0a\n// \u5185\u90e8\u901a\u8fc7 this.context \u53ef\u4ee5\u6d88\u8d39\nThemedButton.contextType = ThemeContext;\n\n// App.js\n// \u4e00\u4e2a\u4f7f\u7528 ThemedButton \u7684\u4e2d\u95f4\u7ec4\u4ef6\nfunction Toolbar(props) {\n  return <ThemedButton onClick={props.changeTheme}>Change Theme</ThemedButton>;\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: themes.light,\n    };\n\n    this.toggleTheme = () => {\n      this.setState(state => ({\n        theme: state.theme === themes.dark ? themes.light : themes.dark,\n      }));\n    };\n  }\n\n  render() {\n    // \u5728 ThemeProvider \u5167\u90e8\u7684 ThemedButton \u6309\u94ae\u7ec4\u4ef6\u4f7f\u7528 state \u7684 theme \u503c\n    // \u800c\u5916\u90e8\u7684\u7ec4\u4ef6\u4f7f\u7528\u9ed8\u8ba4\u7684 theme \u503c\n    return (\n      <ThemeContext.Provider value={this.state.theme}>\n        <Toolbar changeTheme={this.toggleTheme} />\n      </ThemeContext.Provider>\n    );\n  }\n}\n\nexport default () => <App />;\n"}},{path:"/_demos/index",dependencies:{},files:{}}),l.a.createElement(i,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"\u5d4c\u5957\u7ec4\u4ef6"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u5d4c\u5957\u7ec4\u4ef6"},l.a.createElement("span",{className:"icon icon-link"})),"\u5d4c\u5957\u7ec4\u4ef6"),l.a.createElement("p",null,"\u4ece\u4e00\u4e2a\u5728\u7ec4\u4ef6\u6811\u4e2d\u5d4c\u5957\u5f88\u6df1\u7684\u7ec4\u4ef6\u4e2d\u66f4\u65b0 Context \u662f\u5f88\u6709\u5fc5\u8981\u7684\u3002\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 context \u4f20\u9012\u4e00\u4e2a\u51fd\u6570\uff0c\u4f7f\u5f97 ",l.a.createElement("code",null,"<Cosumer>")," \u7ec4\u4ef6\u66f4\u65b0 context\uff1a")),l.a.createElement(m.a,Object(a["a"])({source:{jsx:"import React from 'react';\n\n// ThemeContext\nconst themes = {\n  light: {\n    background: '#eeeeee',\n    color: '#222222',\n  },\n  dark: {\n    background: '#222222',\n    color: '#eeeeee',\n  },\n};\n\n// \u786e\u4fdd\u4f20\u9012\u7ed9 createContext \u7684\u9ed8\u8ba4\u503c\u6570\u636e\u7ed3\u6784\u662f\u8c03\u7528\u7684\u7ec4\u4ef6\uff08consumers\uff09\u6240\u80fd\u5339\u914d\u7684\uff01\nconst ThemeContext = React.createContext({\n  theme: themes.dark,\n  toggleTheme: () => {},\n});\n\nfunction ThemeTogglerButton() {\n  // Theme Toggler \u6309\u94ae\u4e0d\u4ec5\u4ec5\u53ea\u83b7\u53d6 theme \u503c\uff0c\u5b83\u4e5f\u4ece context \u4e2d\u83b7\u53d6\u5230\u4e00\u4e2a toggleTheme \u51fd\u6570\n  return (\n    <ThemeContext.Consumer>\n      {({ theme, toggleTheme }) => (\n        <button\n          onClick={toggleTheme}\n          style={{\n            outline: 'none',\n            color: theme.color,\n            backgroundColor: theme.background,\n            cursor: 'pointer',\n          }}\n        >\n          Toggle Theme\n        </button>\n      )}\n    </ThemeContext.Consumer>\n  );\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleTheme = () => {\n      this.setState(state => ({\n        theme: state.theme === themes.dark ? themes.light : themes.dark,\n      }));\n    };\n\n    // State \u4e5f\u5305\u542b\u4e86\u66f4\u65b0\u51fd\u6570\uff0c\u56e0\u6b64\u5b83\u4f1a\u88ab\u4f20\u9012\u8fdb context provider\u3002\n    this.state = {\n      theme: themes.light,\n      toggleTheme: this.toggleTheme,\n    };\n  }\n  render() {\n    // \u6574\u4e2a state \u90fd\u88ab\u4f20\u9012\u8fdb provider\n    return (\n      <ThemeContext.Provider value={this.state}>\n        <Content />\n      </ThemeContext.Provider>\n    );\n  }\n}\n\nfunction Content() {\n  return (\n    <div>\n      <ThemeTogglerButton />\n    </div>\n  );\n}\n\nexport default () => <App />;\n"}},{path:"/_demos/index-1",dependencies:{},files:{}}),l.a.createElement(u,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("h3",{id:"\u6d88\u8d39\u591a\u4e2a-context"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u6d88\u8d39\u591a\u4e2a-context"},l.a.createElement("span",{className:"icon icon-link"})),"\u6d88\u8d39\u591a\u4e2a Context"),l.a.createElement("p",null,"\u4e3a\u4e86\u786e\u4fdd context \u5feb\u901f\u8fdb\u884c\u91cd\u6e32\u67d3\uff0cReact \u9700\u8981\u4f7f\u6bcf\u4e00\u4e2a consumers \u7ec4\u4ef6\u7684 context \u5728\u7ec4\u4ef6\u6811\u4e2d\u79f0\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u8282\u70b9\u3002")),l.a.createElement(m.a,Object(a["a"])({source:{jsx:"import React from 'react';\n\n// Theme context\uff0c\u9ed8\u8ba4 theme \u662f light \u503c\nconst ThemeContext = React.createContext('light');\n\n// \u7528\u6237\u767b\u5f55 Context\nconst UserContext = React.createContext({ name: 'Guest' });\n\nfunction Profile(props) {\n  return (\n    <div>\n      <div>Theme: {props.theme}</div>\n      <div>Profile: {props.user.name === 'Guest' ? 'Guest' : 'Signed'}</div>\n    </div>\n  );\n}\n\n// \u4e00\u4e2a\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u6d88\u8d39\u591a\u4e2a context\nfunction Content() {\n  return (\n    <ThemeContext.Consumer>\n      {theme => (\n        <UserContext.Consumer>{user => <Profile user={user} theme={theme} />}</UserContext.Consumer>\n      )}\n    </ThemeContext.Consumer>\n  );\n}\n\nfunction Layout() {\n  return (\n    <div>\n      <Content />\n    </div>\n  );\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      theme: 'light',\n      signedInUser: { name: 'Guest' },\n    };\n  }\n  render() {\n    const { signedInUser, theme } = this.state;\n\n    // \u63d0\u4f9b\u521d\u59cb context \u503c\u7684 App \u7ec4\u4ef6\n    return (\n      <ThemeContext.Provider value={theme}>\n        <UserContext.Provider value={signedInUser}>\n          <Layout />\n        </UserContext.Provider>\n      </ThemeContext.Provider>\n    );\n  }\n}\n\nexport default App;\n"}},{path:"/_demos/index-2",title:"\u6d88\u8d39\u591a\u4e2a Context",desc:'<div class="markdown"><p>\u5982\u679c\u4e24\u4e2a\u6216\u8005\u66f4\u591a\u7684 context \u503c\u7ecf\u5e38\u88ab\u4e00\u8d77\u4f7f\u7528\uff0c\u90a3\u4f60\u53ef\u80fd\u8981\u8003\u8651\u4e00\u4e0b\u53e6\u5916\u521b\u5efa\u4f60\u81ea\u5df1\u7684\u6e32\u67d3\u7ec4\u4ef6\uff0c\u4ee5\u63d0\u4f9b\u8fd9\u4e9b\u503c</p></div>',dependencies:{},files:{}}),l.a.createElement(d,null)),l.a.createElement("div",{className:"markdown"},l.a.createElement("p",null,"\u90a3\u4e48\u770b\u4e86\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u662f\u5426\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Context API \u6765\u4ee3\u66ff\u6389\u6240\u6709\u7684\u6570\u636e\u4f20\u9012\uff0c\u5305\u62ec\u53bb\u6389 Redux \u8fd9\u4e9b\u6570\u636e\u540c\u6b65 library \u4e86\uff1f\u5176\u5b9e\u5e76\u4e0d\u5408\u9002\u3002\u524d\u9762\u4e5f\u6709\u63d0\u5230\uff0cContext API \u5e94\u8be5\u7528\u4e8e\u9700\u8981\u5168\u5c40\u5171\u4eab\u6570\u636e\u7684\u573a\u666f\uff0c\u5e76\u4e14\u6570\u636e\u6700\u597d\u662f\u4e0d\u7528\u9891\u7e41\u66f4\u6539\u7684\u3002\u56e0\u4e3a\u4f5c\u4e3a\u4e0a\u5c42\u5b58\u5728\u7684 Context\uff0c\u5728\u6570\u636e\u53d8\u5316\u65f6\uff0c\u5bb9\u6613\u5bfc\u81f4\u6240\u6709\u6d89\u53ca\u7684 Consumer \u91cd\u65b0 render\u3002"),l.a.createElement("h2",{id:"\u6ce8\u610f\u4e8b\u9879"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u6ce8\u610f\u4e8b\u9879"},l.a.createElement("span",{className:"icon icon-link"})),"\u6ce8\u610f\u4e8b\u9879"),l.a.createElement("p",null,"\u56e0\u4e3a context \u4f1a\u4f7f\u7528\u53c2\u8003\u6807\u8bc6\uff08reference identity\uff09\u6765\u51b3\u5b9a\u4f55\u65f6\u8fdb\u884c\u6e32\u67d3\uff0c\u8fd9\u91cc\u53ef\u80fd\u4f1a\u6709\u4e00\u4e9b\u9677\u9631\uff0c\u5f53 ",l.a.createElement("code",null,"<Provider>")," \u7684\u7236\u7ec4\u4ef6\u8fdb\u884c\u91cd\u6e32\u67d3\u65f6\uff0c\u53ef\u80fd\u4f1a\u5728 ",l.a.createElement("code",null,"<Consumer>")," \u7ec4\u4ef6\u4e2d\u89e6\u53d1\u610f\u5916\u7684\u6e32\u67d3\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f53\u6bcf\u6b21 ",l.a.createElement("code",null,"<Provider>")," \u91cd\u6e32\u67d3\u65f6\uff0c\u4ee5\u4e0b\u7684\u4ee3\u7801\u4f1a\u91cd\u6e32\u67d3\u6240\u6709\u4e0b\u9762\u7684 ",l.a.createElement("code",null,"<Consumer>")," \u7ec4\u4ef6\uff0c\u56e0\u4e3a ",l.a.createElement("code",null,"value")," \u5c5e\u6027\u603b\u662f\u88ab\u8d4b\u503c\u4e3a\u65b0\u7684\u5bf9\u8c61\u3002"),l.a.createElement(c.a,{code:"class App extends React.Component {\n  render() {\n    return (\n      <MyContext.Provider value={{ something: 'something' }}>\n        <Toolbar />\n      </MyContext.Provider>\n    );\n  }\n}\n",lang:"jsx"}),l.a.createElement("p",null,"\u4e3a\u4e86\u9632\u6b62\u8fd9\u79cd\u60c5\u51b5\uff0c\u5c06 ",l.a.createElement("code",null,"value")," \u72b6\u6001\u63d0\u5347\u5230\u7236\u8282\u70b9\u7684 ",l.a.createElement("code",null,"state")," \u91cc\uff1a"),l.a.createElement(c.a,{code:"class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: { something: 'something' },\n    };\n  }\n  render() {\n    return (\n      <Provider value={this.state.value}>\n        <Toolbar />\n      </Provider>\n    );\n  }\n}\n",lang:"jsx"}),l.a.createElement("h2",{id:"\u5b9e\u73b0\u539f\u7406"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u5b9e\u73b0\u539f\u7406"},l.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u73b0\u539f\u7406"),l.a.createElement("p",null,l.a.createElement("code",null,"<Provider>")," \u7ec4\u4ef6\u6e90\u7801\u7684\u5b9e\u73b0\u3002"),l.a.createElement(c.a,{code:"export function createProvider(storeKey = 'store', subKey) {\n  const subscriptionKey = subKey || `${storeKey}Subscription`;\n\n  class Provider extends Component {\n    getChildContext() {\n      return { [storeKey]: this[storeKey], [subscriptionKey]: null };\n    }\n\n    constructor(props, context) {\n      super(props, context);\n      this[storeKey] = props.store;\n    }\n\n    render() {\n      return Children.only(this.props.children);\n    }\n  }\n\n  // ......\n\n  Provider.propTypes = {\n    store: storeShape.isRequired,\n    children: PropTypes.element.isRequired,\n  };\n  Provider.childContextTypes = {\n    [storeKey]: storeShape.isRequired,\n    [subscriptionKey]: subscriptionShape,\n  };\n\n  return Provider;\n}\n\nexport default createProvider();\n",lang:"jsx"}),l.a.createElement("p",null,"\u6839\u7ec4\u4ef6\u7528 ",l.a.createElement("code",null,"<Provider>")," \u7ec4\u4ef6\u5305\u88f9\u540e\uff0c\u672c\u8d28\u4e0a\u5c31\u4e3a App \u63d0\u4f9b\u4e86\u4e00\u4e2a\u5168\u5c40\u7684\u5c5e\u6027 store\uff0c\u76f8\u5f53\u4e8e\u5728\u6574\u4e2a App \u8303\u56f4\u5185\uff0c\u5171\u4eab store \u5c5e\u6027\u3002\u5f53\u7136\uff0c",l.a.createElement("code",null,"<Provider>")," \u7ec4\u4ef6\u4e5f\u53ef\u4ee5\u5305\u88f9\u5728\u5176\u4ed6\u7ec4\u4ef6\u4e2d\uff0c\u5728\u7ec4\u4ef6\u7ea7\u7684\u5168\u5c40\u8303\u56f4\u5185\u5171\u4eab s tore\u3002"),l.a.createElement("hr",null),l.a.createElement("p",null,l.a.createElement("strong",null,"\u53c2\u8003\u8d44\u6599\uff1a")),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"https://zh-hans.reactjs.org/docs/context.html",target:"_blank",rel:"noopener noreferrer"},"\ud83d\udcd6 React \u5b98\u65b9\u6587\u6863\uff1aContext",l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},l.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),l.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))),l.a.createElement("li",null,l.a.createElement("a",{href:"https://juejin.im/post/5a90e0545188257a63112977",target:"_blank",rel:"noopener noreferrer"},"\ud83d\udcdd \u804a\u4e00\u804a\u6211\u5bf9 React Context \u7684\u7406\u89e3\u4ee5\u53ca\u5e94\u7528",l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},l.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),l.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))),l.a.createElement("li",null,l.a.createElement("a",{href:"https://juejin.im/post/5b2236016fb9a00e9c47cb6b",target:"_blank",rel:"noopener noreferrer"},"\ud83d\udcdd QQ \u97f3\u4e50\uff1aReact v16 \u65b0\u7279\u6027\u5b9e\u8df5",l.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15",className:"__dumi-default-external-link-icon"},l.a.createElement("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),l.a.createElement("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})))))))}},"K+nK":function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}e.exports=n},fOoO:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),l=r.a.createContext("light"),o=r.a.createContext({name:"Guest"});function c(e){return r.a.createElement("div",null,r.a.createElement("div",null,"Theme: ",e.theme),r.a.createElement("div",null,"Profile: ","Guest"===e.user.name?"Guest":"Signed"))}function s(){return r.a.createElement(l.Consumer,null,e=>r.a.createElement(o.Consumer,null,t=>r.a.createElement(c,{user:t,theme:e})))}function m(){return r.a.createElement("div",null,r.a.createElement(s,null))}class i extends r.a.Component{constructor(e){super(e),this.state={theme:"light",signedInUser:{name:"Guest"}}}render(){var e=this.state,t=e.signedInUser,n=e.theme;return r.a.createElement(l.Provider,{value:n},r.a.createElement(o.Provider,{value:t},r.a.createElement(m,null)))}}t["default"]=i},fZaY:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),l={light:{background:"#eeeeee",color:"#222222"},dark:{background:"#222222",color:"#eeeeee"}},o=r.a.createContext({theme:l.dark,toggleTheme:()=>{}});function c(){return r.a.createElement(o.Consumer,null,e=>{var t=e.theme,n=e.toggleTheme;return r.a.createElement("button",{onClick:n,style:{outline:"none",color:t.color,backgroundColor:t.background,cursor:"pointer"}},"Toggle Theme")})}class s extends r.a.Component{constructor(e){super(e),this.toggleTheme=()=>{this.setState(e=>({theme:e.theme===l.dark?l.light:l.dark}))},this.state={theme:l.light,toggleTheme:this.toggleTheme}}render(){return r.a.createElement(o.Provider,{value:this.state},r.a.createElement(m,null))}}function m(){return r.a.createElement("div",null,r.a.createElement(c,null))}t["default"]=()=>r.a.createElement(s,null)},iKxd:function(e,t,n){"use strict";n.r(t);var a=n("0Owb"),r=n("q1tI"),l=n.n(r),o={light:{background:"#eeeeee",color:"#222222"},dark:{background:"#222222",color:"#eeeeee"}},c=l.a.createContext(o.dark);class s extends l.a.Component{render(){var e=this.props,t=this.context;return l.a.createElement("button",Object(a["a"])({},e,{style:{marginTop:16,outline:"none",color:t.color,backgroundColor:t.background,cursor:"pointer"}}),"Submit")}}function m(e){return l.a.createElement(s,{onClick:e.changeTheme},"Change Theme")}s.contextType=c;class i extends l.a.Component{constructor(e){super(e),this.state={theme:o.light},this.toggleTheme=()=>{this.setState(e=>({theme:e.theme===o.dark?o.light:o.dark}))}}render(){return l.a.createElement(c.Provider,{value:this.state.theme},l.a.createElement(m,{changeTheme:this.toggleTheme}))}}t["default"]=()=>l.a.createElement(i,null)}}]);